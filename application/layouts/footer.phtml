 </div>
 </div>
 <nav class="footer navbar fixed-bottom navbar-light bg-light justify-content-between shadow">
 	<span class="mb-md-0 text-muted">&copy; <?= date('Y') ?> BemFeito Sistemas</span>
 	<img class="img-fluid pull-right" loading="lazy" src=".../../../images/logo_horizontal.png" width="90" height="15" alt="Logo do SISTEMA">
 </nav>


 <!-- Popper JS -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/11.0.2/bootstrap-slider.min.js"></script>


 <!-- Latest compiled JavaScript -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>

 <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
 <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.js"></script>

 <script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
 <script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>
 <script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.print.min.js"></script>


 <!-- Latest compiled and minified JavaScript -->
 <script src="https://cdn.rawgit.com/PascaleBeier/bootstrap-validate/v2.2.0/dist/bootstrap-validate.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.full.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/i18n/pt-BR.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


 <script src="https://cdn.es.gov.br/scripts/jquery/jquery-momentjs/2.18.1/moment-with-locales.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap4-datetimepicker@5.2.3/build/js/bootstrap-datetimepicker.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

 <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.js"></script>

 <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>

 <script src="https://cdn.jsdelivr.net/npm/dropzone@5.9.3/dist/min/dropzone.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/dropzone@5.9.3/dist/min/dropzone.min.js"></script>

 <br>
 </body>

 </html>
 <script>
 	// Desativa autodescoberta para evitar que o Dropzone inicialize 2x
 	Dropzone.autoDiscover = false;

 	const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

 	function openFullscreen() {
 		let elem = document.documentElement;
 		$('.full-screen').hide();
 		$('.close-full-screen').show();
 		$(".sidebar").addClass('active');
 		if (elem.requestFullscreen) {
 			elem.requestFullscreen();
 		} else if (elem.webkitRequestFullscreen) {
 			/* Safari */
 			elem.webkitRequestFullscreen();
 		} else if (elem.msRequestFullscreen) {
 			/* IE11 */
 			elem.msRequestFullscreen();
 		}
 	}

 	function closeFullscreen() {
 		$('.full-screen').show();
 		$('.close-full-screen').hide();
 		if (document.exitFullscreen) {
 			document.exitFullscreen();
 		} else if (document.webkitExitFullscreen) {
 			/* Safari */
 			document.webkitExitFullscreen();
 		} else if (document.msExitFullscreen) {
 			/* IE11 */
 			document.msExitFullscreen();
 		}
 	}

 	function carregarTela(src, content = '#content', back = false) {
 		let conteiner = $(content);
 		$('html, body').animate({
 			scrollTop: 0
 		}, 600);
 		conteiner.empty();

 		conteiner.append('<div style="margin-top:20% !important" class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div></div>');

 		$.ajax({
 			type: "GET",
 			url: src,
 			data: {
 				ajax: true
 			},
 			success: function(data) {
 				if (!back && content == '#content') {
 					history.pushState({
 						src: src,
 						content: content
 					}, '', '');

 					localStorage.setItem('last_src', src);
 					localStorage.setItem('last_content', content);
 				}
 				conteiner.html(data);
 				if (isMobile)
 					$(".sidebar").addClass('active');

 				$('#content').css({
 					'overflow-x': 'auto',
 					'overflow-y': 'auto'
 				});
 			}
 		});

 	}

 	// Inicial: grava o estado da página atual
 	//history.replaceState({ src: '../../dashboard' }, '', '');

 	// Botão Voltar/Avançar
 	window.addEventListener('popstate', function(event) {
 		if (event.state && event.state.src) {
 			// Volta para a tela AJAX correspondente
 			carregarTela(event.state.src, event.state.content, true); // false = não empilhar de novo
 		} else {
 			console.log(event);
 			//carregarTela('../../index');
 		}
 	});

 	function removeAtiveLinks(bloco, item) {
 		$(bloco).find(item).each(function() {
 			$(this).removeClass('active');
 		});
 	}

 	$('.principal-link').on('click', function() {
 		let self = $(this);
 		removeAtiveLinks('.sidebar', '.principal-link');
 		self.addClass('active');
 		localStorage.setItem('last_menu', self.data('menu-item'));
 		carregarTela(self.data('src'));
 	});

 	function paginaInicial() {
 		$('.index-link').click();
 	}

 	jQuery.extend(jQuery.fn.dataTableExt.oSort, {
 		"date-br-pre": function(a) {
 			if (a == null || a == "") {
 				return 0;
 			}
 			var brDatea = a.split('/');
 			return (brDatea[2] + brDatea[1] + brDatea[0]) * 1;
 		},

 		"date-br-asc": function(a, b) {
 			return ((a < b) ? -1 : ((a > b) ? 1 : 0));
 		},

 		"date-br-desc": function(a, b) {
 			return ((a < b) ? 1 : ((a > b) ? -1 : 0));
 		}
 	});


 	Number.prototype.formatMoney = function(c, d, t) {
 		var n = this,
 			c = isNaN(c = Math.abs(c)) ? 2 : c,
 			d = d == undefined ? "." : d,
 			t = t == undefined ? "," : t,
 			s = n < 0 ? "-" : "",
 			i = String(parseInt(n = Math.abs(Number(n) || 0).toFixed(c))),
 			j = (j = i.length) > 3 ? j % 3 : 0;
 		return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
 	};

 	function moneyToFloat(val) {
 		var semPontos = val.replace(/\./g, '');
 		var formatado = semPontos.replace(',', '.');
 		return parseFloat(formatado);
 	}

 	$(document).ready(function() {
 		$("#sidebarCollapse").on('click', function() {
 			$(".sidebar").toggleClass('active');
 		});

 		/*$(function () {
		  $('[data-toggle="tooltip"]').tooltip({html:true})
		});*/

 		$(function() {
 			let last_src = localStorage.getItem('last_src');
 			let last_menu = 'dashboard';
 			if (last_src) {
 				history.replaceState({
 					src: last_src,
 					content: localStorage.getItem('last_content')
 				}, '', '');
 				carregarTela(last_src, localStorage.getItem('last_content'), localStorage.getItem('last_callback'), false); // reconstrói a tela em que ele estava
 				last_menu = localStorage.getItem('last_menu');
 			} else {
 				history.replaceState({
 					src: '../../dashboard',
 					content: '#content'
 				}, '', '');
 				carregarTela('../../dashboard', '#content', false);
 			}
 			$('[data-menu-item="' + last_menu + '"]').addClass('active');
 		});

 		$('.close-full-screen').hide();

 		if (!isMobile)
 			$(".sidebar").toggleClass('active');

 		$("#content").on('mousemove', function() {
 			//$(".sidebar").addClass('active');
 		});

 	});

 	function remover(modulo, id, nome) {

 		swal({
 				title: "Atenção!",
 				text: "Deseja remover o registro: " + nome + "?",
 				type: "warning",
 				showCancelButton: true,
 				confirmButtonColor: "#4B8A08",
 				confirmButtonText: "Sim, quero remover!",
 				cancelButtonText: "Não!",
 				showLoaderOnConfirm: true,
 				closeOnConfirm: false
 			},
 			function(isConfirm) {
 				if (isConfirm) {

 					$.ajax({
 						type: "POST",
 						url: "../../" + modulo + "/remover",
 						data: {
 							id: id
 						},
 						success: function(data) {
 							// Falha ao remover
 							if (data.trim().length > 0) {
 								swal({
 									title: "Atenção!",
 									text: data,
 									type: "error"
 								});
 								// removido com sucesso
 							} else {
 								swal({
 									title: "Sucesso!",
 									text: "Cadastro removido com sucesso!",
 									type: "success",
 									timer: 1,
 									showConfirmButton: false
 								}, function() {
 									carregarTela("../../" + modulo);
 									setTimeout(function() {
 										swal.close();
 									}, 2000);
 								});
 							}
 						}
 					});
 				}
 			}
 		);
 	}
 </script>